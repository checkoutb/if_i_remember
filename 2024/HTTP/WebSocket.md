WebSocket

2024-04-20 16:13

[[toc]]

---
---


# 概述

单个TCP连接上 全双工通信。
。。基于TCP的。 。 全双工通信，应该是指 client主动发 和 server主动发。

允许 服务器 主动向 客户端推送数据。

浏览器和服务器 只需完成一次握手，两者就可以 直接建立持久性的连接，并 双向数据传输。
。这个是建立 TCP后， 用 一次HTTP 请求 来建立。

Websocket 通过HTTP/1.1 协议的==101状态码==进行握手。

为了创建Websocket连接，需要通过浏览器发出请求，之后服务器进行回应，这个过程通常称为“握手”（handshaking）


---

# 缺点
- 单连接的成本较高
  WebSocket需要先建立一个 TCP； 需要维护连接的状态
- 推送数据前需要先由客户端启动连接
  。就是无法做到 UDP 直接发。
  。必须客户端先连过来。
- 不能代理和负载均衡
  长连接，所以无法使用http的代理和负载均衡，需要使用特制的
- 安全性
  建立时，如果使用http，那么所有传输的数据都是明文。
  加密需要使用 WSS，底层是 HTTPS


---

# 概述

WebSocket 是 支持双向通讯 的 网络通信协议
服务器可以向客户端发送，客户端也可以向服务器发送。

服务器推送技术的一种

特点
- 基于TCP，服务器端的实现比较容易
- 与HTTP有良好的兼容性，默认端口也是 80, 443。 握手采用HTTP，因此握手时不容易被屏蔽，能通过各种HTTP代理服务器
- 数据格式较轻量，性能开销小，通信高效
- 可以发送文本，也可以发送 二进制数据
- 没有 同源限制，客户端可以和任意服务器通信
- 协议标识符是 ws， 加密则为 wss，服务器网址就是 URL










